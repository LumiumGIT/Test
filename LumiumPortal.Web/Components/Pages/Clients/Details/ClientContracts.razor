@using Lumium.Application.Common.Extensions

<MudStack Spacing="3">
    <MudStack Row="true" Justify="Justify.SpaceBetween" AlignItems="AlignItems.Center">
        <MudText Typo="Typo.body2" Color="Color.Default">
            @Contracts.Count ukupno ugovora
        </MudText>
        <MudButton StartIcon="@Icons.Material.Filled.Add" 
                   Size="Size.Small" 
                   Variant="Variant.Filled" 
                   Color="Color.Primary"
                   OnClick="@OnAddContract">
            Novi ugovor
        </MudButton>
    </MudStack>
    
    <MudTable Items="@Contracts" 
              Hover="true" 
              Breakpoint="Breakpoint.Sm" 
              Elevation="0"
              Dense="true">
        <HeaderContent>
            <MudTh>Naziv ugovora</MudTh>
            <MudTh>Tip</MudTh>
            <MudTh>Period</MudTh>
            <MudTh Style="text-align: right">Vrednost</MudTh>
            <MudTh>Status</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Naziv">
                <MudText Typo="Typo.body2"><strong>@context.Name</strong></MudText>
            </MudTd>
            <MudTd DataLabel="Tip">
                <MudChip T="string" Size="Size.Small" Variant="Variant.Outlined">
                    @context.Type.GetDescription()
                </MudChip>
            </MudTd>
            <MudTd DataLabel="Period">
                <MudText Typo="Typo.body2">
                    @context.StartDate.ToString("MMM yyyy") - @context.EndDate.ToString("MMM yyyy")
                </MudText>
            </MudTd>
            <MudTd DataLabel="Vrednost" Style="text-align: right">
                <MudText Typo="Typo.body2"><strong>@context.Value.ToString("N0") RSD</strong></MudText>
            </MudTd>
            <MudTd DataLabel="Status">
                <MudChip T="string" Size="Size.Small" 
                         Color="@GetContractStatusColor(context.Status)">
                    @context.Status.GetDescription()
                </MudChip>
            </MudTd>
        </RowTemplate>
        <NoRecordsContent>
            <MudText Typo="Typo.body2" Color="Color.Default" Align="Align.Center" Class="py-6">
                Nema aktivnih ugovora
            </MudText>
        </NoRecordsContent>
    </MudTable>
</MudStack>